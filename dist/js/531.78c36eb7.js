"use strict";(self["webpackChunkproject"]=self["webpackChunkproject"]||[]).push([[531],{1531:function(e,t,l){l.r(t),l.d(t,{default:function(){return X}});var r=l(3396),s=l(7139),c=l(9242);const a=(0,r.uE)('<div class="banner bg-user-checkout"><div class="mask"></div><h2>付款確認</h2></div><div class="order-progress mt-5"><ul><li><i class="fa-solid fa-list-check"></i>確認訂單</li><li><i class="fa-regular fa-pen-to-square"></i>資料填寫</li><li class="active"><i class="fa-solid fa-money-check-dollar"></i>付款完成</li></ul></div>',2),d={class:"container"},o={class:"my-5 row justify-content-center"},i={class:"col-12 col-md-8 col-xl-7 check-out"},n=(0,r._)("div",{class:"card-header"},[(0,r._)("h2",{class:"text-center py-3"},"訂單資訊")],-1),u={class:"frame"},p={key:0,class:"d-flex flex-column text-center pay-success"},_=(0,r._)("i",{class:"fa-solid fa-check mb-2"},null,-1),h=(0,r._)("h5",null,"付款成功",-1),y={class:"mt-2 mb-2"},m=(0,r._)("button",{type:"button",class:"button w-100"},"繼續購物",-1),g={key:1},v={class:"text-end create"},w={class:"accordion",id:"accordionExample"},f={class:"accordion-item"},k=(0,r._)("h2",{class:"accordion-header",id:"headingOne"},[(0,r._)("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"}," 商品資訊 ")],-1),b={class:"accordion-body"},x={class:"d-flex align-items-center product"},$=["src"],z={class:"d-flex flex-column"},T={class:"ms-auto"},D={key:0},O={key:1},C={class:"card-body"},I=(0,r._)("td",null,"訂單編號",-1),j=(0,r._)("td",null,"付款方式",-1),E=(0,r._)("td",null,"姓名",-1),N=(0,r._)("td",null,"手機",-1),q=(0,r._)("td",null,"E-mail",-1),L=(0,r._)("td",null,"收件地址",-1),U=(0,r._)("td",null,"備註",-1),H={key:0},M={key:1},W={key:0},Y=(0,r._)("td",null,"小計",-1),Z=(0,r._)("td",null,"運費",-1),K={key:0},A={key:1},B=(0,r._)("td",null,"金額總計",-1),F={key:0},G={key:1},J={class:"text-center"};function P(e,t,l,P,Q,R){const S=(0,r.up)("LoadingComponent"),V=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(S,{active:Q.isLoading},null,8,["active"]),a,(0,r._)("div",d,[(0,r._)("div",o,[(0,r._)("div",i,[n,(0,r._)("div",u,[!0===Q.order.is_paid?((0,r.wg)(),(0,r.iD)("div",p,[_,h,(0,r._)("div",y,[(0,r.Uk)("訂單編號："+(0,s.zw)(Q.order.id)+" ",1),(0,r._)("i",{onClick:t[0]||(t[0]=(...e)=>R.copyText&&R.copyText(...e)),class:"fa-regular fa-copy"})]),(0,r.Wm)(V,{to:"/user/shopping",onClick:(0,c.iM)(e.scrollToTop,["prevent"])},{default:(0,r.w5)((()=>[m])),_:1},8,["onClick"])])):((0,r.wg)(),(0,r.iD)("div",g,[(0,r._)("div",v,[(0,r._)("h5",null,"訂單成立時間："+(0,s.zw)(e.$filters.date(Q.order.create_at)),1)]),(0,r._)("div",w,[(0,r._)("div",f,[k,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(Q.order.products,(t=>((0,r.wg)(),(0,r.iD)("div",{id:"collapseOne",key:t.id,class:"accordion-collapse collapse show","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},[(0,r._)("div",b,[(0,r._)("div",x,[(0,r._)("div",null,[(0,r._)("img",{src:t.product.imageUrl,alt:"產品圖片",style:{width:"100px",height:"100px"}},null,8,$)]),(0,r._)("div",z,[(0,r._)("h5",null,(0,s.zw)(t.product.title),1),(0,r._)("p",null,"數量："+(0,s.zw)(t.qty),1)]),(0,r._)("div",T,[t.final_total?((0,r.wg)(),(0,r.iD)("div",D,"NT$ "+(0,s.zw)(e.$filters.currency(t.final_total)),1)):((0,r.wg)(),(0,r.iD)("div",O,">NT$ "+(0,s.zw)(e.$filters.currency(t.product.price)),1))])])])])))),128))])]),(0,r._)("div",C,[(0,r._)("table",null,[(0,r._)("tbody",null,[(0,r._)("tr",null,[I,(0,r._)("td",null,[(0,r.Uk)((0,s.zw)(Q.order.id)+" ",1),(0,r._)("i",{onClick:t[1]||(t[1]=(...e)=>R.copyText&&R.copyText(...e)),class:"fa-regular fa-copy"})])]),(0,r._)("tr",null,[j,(0,r._)("td",null,(0,s.zw)(Q.order.user.pay),1)]),(0,r._)("tr",null,[E,(0,r._)("td",null,(0,s.zw)(Q.order.user.name),1)]),(0,r._)("tr",null,[N,(0,r._)("td",null,(0,s.zw)(Q.order.user.tel),1)]),(0,r._)("tr",null,[q,(0,r._)("td",null,(0,s.zw)(Q.order.user.email),1)]),(0,r._)("tr",null,[L,(0,r._)("td",null,(0,s.zw)(Q.order.user.address),1)]),(0,r._)("tr",null,[U,Q.order.message?((0,r.wg)(),(0,r.iD)("td",M,(0,s.zw)(Q.order.message),1)):((0,r.wg)(),(0,r.iD)("td",H,"無"))]),R.calcTotal<3e3?((0,r.wg)(),(0,r.iD)("tr",W,[Y,(0,r._)("td",null,"NT$ "+(0,s.zw)(e.$filters.currency(Q.order.total)),1)])):(0,r.kq)("",!0),(0,r._)("tr",null,[Z,R.calcTotal<3e3?((0,r.wg)(),(0,r.iD)("td",K,"+ $120")):((0,r.wg)(),(0,r.iD)("td",A,"恭喜達成免運！"))]),(0,r._)("tr",null,[B,R.calcTotal<3e3?((0,r.wg)(),(0,r.iD)("td",F,"NT$ "+(0,s.zw)(e.$filters.currency(parseInt(Q.order.total)+120)),1)):((0,r.wg)(),(0,r.iD)("td",G,"NT$ "+(0,s.zw)(e.$filters.currency(Q.order.total)),1))])])])]),(0,r._)("div",J,[(0,r._)("button",{type:"button",class:"button",onClick:t[2]||(t[2]=(0,c.iM)(((...e)=>R.payOrder&&R.payOrder(...e)),["prevent"]))},"確認付款")])]))])])])])],64)}var Q=l(2436),R={data(){return{order:{user:{}},isLoading:!1,orderId:""}},mixins:[Q.Z],inject:["emitter"],computed:{calcTotal(){if(!this.order?.products)return 0;const e=Object.values(this.order?.products);return e.reduce(((e,t)=>e+t.total),0)}},methods:{getOrder(){const e=`https://vue3-course-api.hexschool.io/api/cc45001127-api/order/${this.orderId}`;this.$http.get(e).then((e=>{e.data.success&&(this.order=e.data.order)}))},payOrder(){const e=`https://vue3-course-api.hexschool.io/api/cc45001127-api/pay/${this.orderId}`;this.$http.post(e).then((e=>{console.log("付款成功",e),e.data.success&&this.getOrder()}))},copyText(){const e=this.order.id,t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),this.emitter.emit("push-message",{style:"success",title:"已複製訂單編號"})}},created(){this.orderId=this.$route.params.orderId,this.getOrder()}},S=l(89);const V=(0,S.Z)(R,[["render",P]]);var X=V}}]);
//# sourceMappingURL=531.78c36eb7.js.map