"use strict";(self["webpackChunkproject"]=self["webpackChunkproject"]||[]).push([[59],{6712:function(t,e,s){s.d(e,{Z:function(){return P}});var i=s(3396),a=s(9242),o=s(7139);const r={"aria-label":"Page navigation example"},l={class:"pagination justify-content-center"},n={key:0,class:"page-item"},c=(0,i._)("span",{"aria-hidden":"true"},"«",-1),d=[c],u=["onClick"],g={key:1,class:"page-item"},p=(0,i._)("span",{"aria-hidden":"true"},"»",-1),h=[p];function m(t,e,s,c,p,m){return(0,i.wg)(),(0,i.iD)("nav",r,[(0,i._)("ul",l,[s.pages.has_pre?((0,i.wg)(),(0,i.iD)("li",n,[(0,i._)("a",{class:"page",href:"#","aria-label":"Previous",onClick:e[0]||(e[0]=(0,a.iM)((t=>m.previousPage(s.pages)),["prevent"]))},d)])):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.pages.total_pages,(t=>((0,i.wg)(),(0,i.iD)("li",{class:"page-item",key:t},[(0,i._)("a",{class:(0,o.C_)(["page",{active:t===s.pages.current_page}]),href:"#",onClick:(0,a.iM)((e=>m.updatePage(t)),["prevent"])},(0,o.zw)(t),11,u)])))),128)),s.pages.has_next?((0,i.wg)(),(0,i.iD)("li",g,[(0,i._)("a",{class:"page",href:"#","aria-label":"Next",onClick:e[1]||(e[1]=(0,a.iM)((t=>m.nextPage(s.pages)),["prevent"]))},h)])):(0,i.kq)("",!0)])])}var v=s(2436),C={props:["pages"],data(){return{nowPage:""}},mixins:[v.Z],methods:{updatePage(t){this.$emit("emit-pages",t),this.nowPage=t,this.scrollToTop()},previousPage(t){this.nowPage=t.current_page,this.nowPage>1?this.nowPage--:this.nowPage=1,this.updatePage(this.nowPage)},nextPage(t){this.nowPage=t.current_page,this.nowPage<t.total_pages?this.nowPage++:this.nowPage=t.total_pages,this.updatePage(this.nowPage)}}},_=s(89);const y=(0,_.Z)(C,[["render",m]]);var P=y},7059:function(t,e,s){s.r(e),s.d(e,{default:function(){return O}});var i=s(3396),a=s(9242),o=s(7139);const r=(0,i._)("div",{class:"l-banner bg-product"},[(0,i._)("div",{class:"mask"}),(0,i._)("h2",null,"Product")],-1),l={class:"container mt-3"},n={class:"row"},c={class:"col-md-4 col-lg-3",id:"select"},d={class:"list-group mb-3"},u={class:"mt-3 mb-3"},g=(0,i._)("button",null,[(0,i._)("i",{class:"bi bi-search"})],-1),p={class:"col-md-8 col-lg-9 l-product-content"},h={class:"row row-cols-sm-2 row-cols-lg-3"},m={class:"card"},v={class:"card-top"},C=["onClick"],_=(0,i._)("i",{class:"bi bi-heart"},null,-1),y=[_],P=["onClick"],b=(0,i._)("i",{class:"bi bi-heart-fill"},null,-1),w=[b],k=["src"],f={class:"more"},F=["onClick"],T={class:"card-body w-100"},D=["onClick"],$={class:"category"},x={class:"d-flex justify-content-between"},Z={class:"price"},S={key:0,class:"h5"},q={key:1,class:"h5"},L={key:2,class:"h6"},z={class:"add-cart ml-auto"},E=["disabled","onClick"],I={key:0,class:"spinner-border spinner-border-sm","aria-hidden":"true"},j={class:"not-found"},M=(0,i._)("i",{class:"bi bi-chat-square-dots"},null,-1),N=(0,i._)("p",null,"找不到相關的產品",-1),U=(0,i._)("p",null,"請嘗試輸入其他關鍵字",-1),A=[M,N,U];function H(t,e,s,_,b,M){const N=(0,i.up)("LoadingComponent"),U=(0,i.up)("Pagination");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(N,{active:b.isLoading},null,8,["active"]),r,(0,i._)("div",l,[(0,i._)("div",n,[(0,i._)("div",c,[(0,i._)("ul",d,[(0,i._)("li",u,[(0,i.wy)((0,i._)("input",{type:"search","onUpdate:modelValue":e[0]||(e[0]=t=>b.search=t),value:"",placeholder:"",onInput:e[1]||(e[1]=(...t)=>M.handleInput&&M.handleInput(...t)),onCompositionstart:e[2]||(e[2]=(...t)=>M.handleCompositionStart&&M.handleCompositionStart(...t)),onCompositionend:e[3]||(e[3]=(...t)=>M.handleCompositionEnd&&M.handleCompositionEnd(...t))},null,544),[[a.nr,b.search]]),g]),(0,i._)("li",{class:(0,o.C_)(["list-group-item",{active:""===b.selectedCategory}]),style:{cursor:"pointer"},onClick:e[4]||(e[4]=t=>""===b.search&&M.selectCategory(""))},"全部商品",2),(0,i._)("li",{class:(0,o.C_)(["list-group-item",{active:"淺烘培"===b.selectedCategory}]),style:{cursor:"pointer"},onClick:e[5]||(e[5]=t=>""===b.search&&M.selectCategory("淺烘培"))},"淺烘培",2),(0,i._)("li",{class:(0,o.C_)(["list-group-item",{active:"中烘培"===b.selectedCategory}]),style:{cursor:"pointer"},onClick:e[6]||(e[6]=t=>""===b.search&&M.selectCategory("中烘培"))},"中烘培",2),(0,i._)("li",{class:(0,o.C_)(["list-group-item",{active:"深烘培"===b.selectedCategory}]),style:{cursor:"pointer"},onClick:e[7]||(e[7]=t=>""===b.search&&M.selectCategory("深烘培"))},"深烘培",2),(0,i._)("li",{class:(0,o.C_)(["list-group-item",{active:"周邊商品"===b.selectedCategory}]),style:{cursor:"pointer"},onClick:e[8]||(e[8]=t=>""===b.search&&M.selectCategory("周邊商品"))},"周邊商品",2)])]),(0,i._)("div",p,[(0,i._)("div",h,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(M.filterProducts,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"l-frame",key:e.id},[(0,i._)("div",m,[(0,i._)("div",v,[e.isFavorite?((0,i.wg)(),(0,i.iD)("button",{key:1,type:"button",class:"btn btn-outline-info btn-love",onClick:s=>t.removeToFavorites(e)},w,8,P)):((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",class:"btn btn-outline-info btn-love",onClick:s=>t.addToFavorites(e)},y,8,C)),(0,i._)("img",{src:e.imageUrl,alt:"產品圖片"},null,8,k),(0,i._)("div",f,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary btn-more",onClick:t=>M.getProduct(e.id)},"More... ",8,F)])]),(0,i._)("div",T,[(0,i._)("h5",{class:"title",style:{cursor:"pointer"},onClick:t=>M.getProduct(e.id)},(0,o.zw)(e.title),9,D),(0,i._)("div",$,(0,o.zw)(e.category),1),(0,i._)("div",x,[(0,i._)("div",Z,[e.price?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",S,"NT$ "+(0,o.zw)(t.$filters.currency(e.origin_price)),1)),e.price?((0,i.wg)(),(0,i.iD)("del",q,"NT$ "+(0,o.zw)(t.$filters.currency(e.origin_price)),1)):(0,i.kq)("",!0),e.price?((0,i.wg)(),(0,i.iD)("div",L,"NT$ "+(0,o.zw)(t.$filters.currency(e.price)),1)):(0,i.kq)("",!0)]),(0,i._)("div",z,[(0,i._)("button",{type:"button",class:"btn btn-outline-dark",disabled:this.status.loadingItem===e.id,onClick:s=>t.addToCart(e.id)},[this.status.loadingItem===e.id?((0,i.wg)(),(0,i.iD)("span",I)):(0,i.kq)("",!0),(0,i.Uk)(" 加入購物車 ")],8,E)])])])])])))),128)),(0,i.wy)((0,i._)("div",j,A,512),[[a.F8,0===M.filterProducts.length]])]),(0,i.wy)((0,i.Wm)(U,{pages:b.pagination,onEmitPages:M.getProducts},null,8,["pages","onEmitPages"]),[[a.F8,""===b.selectedCategory&&""===b.search]])])])])],64)}s(560);var Y=s(6712),K=s(2436),W=s(2578),R=s(9498),V=s(4677),B={data(){return{products:[],allProducts:[],search:"",selectedCategory:"",pagination:{},isLoading:!1,isActive:!1,isComposing:!1}},components:{Pagination:Y.Z},inject:["emitter"],mixins:[K.Z],computed:{...(0,W.rn)(R.Z,["isFavorites"]),...(0,W.rn)(V.Z,["status"]),filterProducts(){return""!==this.search?this.allProducts.filter((t=>t.title.match(new RegExp(this.search,"i")))):""!==this.selectedCategory?this.allProducts.filter((t=>t.category===this.selectedCategory)):this.products}},methods:{...(0,W.nv)(R.Z,["loadFavoritesFromLocalStorage","addToFavorites","removeToFavorites","isProductFavorite"]),...(0,W.nv)(V.Z,["addToCart","getCart"]),getProducts(t=1){const e=`https://vue3-course-api.hexschool.io/api/cc45001127-api/products/?page=${t}`;this.isLoading=!0,this.$http.get(e).then((t=>{this.isLoading=!1,this.pagination=t.data.pagination,this.products=t.data.products.map((t=>({...t,isFavorite:this.isProductFavorite(t)})))}))},getAllProducts(){const t="https://vue3-course-api.hexschool.io/api/cc45001127-api/products/all";this.$http.get(t).then((t=>{this.allProducts=t.data.products}))},getProduct(t){this.scrollToTop(),this.$router.push(`/user/product/${t}`)},selectCategory(t){this.selectedCategory=t,""===t?this.products=this.products.map((t=>{const e=this.allProducts.find((e=>e.id===t.id));return e?{...t,isFavorite:e.isFavorite}:t})):""===this.search&&""===t||(this.allProducts=this.allProducts.map((t=>({...t,isFavorite:this.isProductFavorite(t)})))),this.scrollToTop()},handleInput(){this.isComposing||this.handleSearchChange()},handleCompositionStart(){this.isComposing=!0},handleCompositionEnd(){this.isComposing=!1,this.handleSearchChange()},handleSearchChange(){""===this.search?this.selectCategory(""):this.selectCategory("search")}},mounted(){this.emitter.on("emit-category",this.selectCategory)},beforeUnmount(){this.emitter.off("emit-category")},created(){this.getProducts(),this.getAllProducts(),this.getCart(),this.loadFavoritesFromLocalStorage()}},G=s(89);const J=(0,G.Z)(B,[["render",H]]);var O=J}}]);
//# sourceMappingURL=59.53b67d04.js.map