"use strict";(self["webpackChunkproject"]=self["webpackChunkproject"]||[]).push([[916],{6677:function(e,t,l){l.r(t),l.d(t,{default:function(){return te}});var r=l(3396),o=l(7139),s=l(9242);const a=(0,r.uE)('<div class="l-banner bg-user-checkout"><div class="mask"></div><h2>Order Pay</h2></div><div class="order-progress mt-5"><ul><li><i class="fa-solid fa-list-check"></i>確認訂單</li><li><i class="fa-regular fa-pen-to-square"></i>資料填寫</li><li class="active"><i class="fa-solid fa-money-check-dollar"></i>付款完成</li></ul></div>',2),c={class:"container"},d={class:"my-5 row justify-content-center"},i={class:"col-12 col-md-8 col-xl-7 check-out"},n=(0,r._)("div",{class:"card-header"},[(0,r._)("h2",{class:"text-center py-3"},"訂單資訊")],-1),u={class:"check-out-frame"},p={key:0,class:"d-flex flex-column text-center pay-success"},h=(0,r._)("i",{class:"fa-solid fa-check mb-2"},null,-1),_=(0,r._)("h5",null,"付款成功",-1),y={class:"mt-2 mb-2"},g=(0,r._)("button",{type:"button",class:"button w-50"},"繼續購物",-1),m={key:1},v={class:"text-end create"},w={class:"accordion",id:"accordionExample"},f={class:"accordion-item"},k=(0,r._)("h2",{class:"accordion-header",id:"headingOne"},[(0,r._)("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"}," 商品資訊 ")],-1),b={class:"accordion-body"},x={class:"d-flex align-items-center check-out-product"},T=["src"],$={class:"d-flex flex-column mx-1"},z={class:"ms-auto"},D={key:0},C={key:1},O={class:"card-body"},L=(0,r._)("td",null,"訂單編號",-1),I=(0,r._)("td",null,"付款方式",-1),j=(0,r._)("td",null,"姓名",-1),E=(0,r._)("td",null,"手機",-1),N=(0,r._)("td",null,"E-mail",-1),F=(0,r._)("td",null,"收件地址",-1),q=(0,r._)("td",null,"備註",-1),U={key:0},Z={key:1},H={key:0},M=(0,r._)("td",null,"小計",-1),S=(0,r._)("td",null,"運費",-1),W={key:0},Y={key:1},K=(0,r._)("td",null,"金額總計",-1),P={key:0},A={key:1},B={class:"text-center"};function G(e,t,l,G,J,Q){const R=(0,r.up)("LoadingComponent"),V=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(R,{active:J.isLoading},null,8,["active"]),a,(0,r._)("div",c,[(0,r._)("div",d,[(0,r._)("div",i,[n,(0,r._)("div",u,[!0===J.order.is_paid?((0,r.wg)(),(0,r.iD)("div",p,[h,_,(0,r._)("div",y,[(0,r.Uk)("訂單編號："+(0,o.zw)(J.order.id)+" ",1),(0,r._)("i",{onClick:t[0]||(t[0]=(...e)=>Q.copyText&&Q.copyText(...e)),class:"fa-regular fa-copy"})]),(0,r.Wm)(V,{to:"/user/shopping",onClick:(0,s.iM)(Q.scrollToTop,["prevent"])},{default:(0,r.w5)((()=>[g])),_:1},8,["onClick"])])):((0,r.wg)(),(0,r.iD)("div",m,[(0,r._)("div",v,[(0,r._)("h5",null,"訂單成立時間："+(0,o.zw)(e.$filters.date(J.order.create_at)),1)]),(0,r._)("div",w,[(0,r._)("div",f,[k,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(J.order.products,(t=>((0,r.wg)(),(0,r.iD)("div",{id:"collapseOne",key:t.id,class:"accordion-collapse collapse show","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},[(0,r._)("div",b,[(0,r._)("div",x,[(0,r._)("div",null,[(0,r._)("img",{src:t.product.imageUrl,alt:"產品圖片",style:{width:"100px",height:"100px"}},null,8,T)]),(0,r._)("div",$,[(0,r._)("h5",null,(0,o.zw)(t.product.title),1),(0,r._)("p",null,"數量："+(0,o.zw)(t.qty),1)]),(0,r._)("div",z,[t.final_total?((0,r.wg)(),(0,r.iD)("h6",D,"NT$ "+(0,o.zw)(e.$filters.currency(t.final_total)),1)):((0,r.wg)(),(0,r.iD)("h6",C,">NT$ "+(0,o.zw)(e.$filters.currency(t.product.price)),1))])])])])))),128))])]),(0,r._)("div",O,[(0,r._)("table",null,[(0,r._)("tbody",null,[(0,r._)("tr",null,[L,(0,r._)("td",null,[(0,r.Uk)((0,o.zw)(J.order.id)+" ",1),(0,r._)("i",{onClick:t[1]||(t[1]=(...e)=>Q.copyText&&Q.copyText(...e)),class:"fa-regular fa-copy"})])]),(0,r._)("tr",null,[I,(0,r._)("td",null,(0,o.zw)(J.order.user.pay),1)]),(0,r._)("tr",null,[j,(0,r._)("td",null,(0,o.zw)(J.order.user.name),1)]),(0,r._)("tr",null,[E,(0,r._)("td",null,(0,o.zw)(J.order.user.tel),1)]),(0,r._)("tr",null,[N,(0,r._)("td",null,(0,o.zw)(J.order.user.email),1)]),(0,r._)("tr",null,[F,(0,r._)("td",null,(0,o.zw)(J.order.user.address),1)]),(0,r._)("tr",null,[q,J.order.message?((0,r.wg)(),(0,r.iD)("td",Z,(0,o.zw)(J.order.message),1)):((0,r.wg)(),(0,r.iD)("td",U,"無"))]),Q.calcTotal<3e3?((0,r.wg)(),(0,r.iD)("tr",H,[M,(0,r._)("td",null,"NT$ "+(0,o.zw)(e.$filters.currency(J.order.total)),1)])):(0,r.kq)("",!0),(0,r._)("tr",null,[S,Q.calcTotal<3e3?((0,r.wg)(),(0,r.iD)("td",W,"+ $120")):((0,r.wg)(),(0,r.iD)("td",Y,"恭喜達成免運！"))]),(0,r._)("tr",null,[K,Q.calcTotal<3e3?((0,r.wg)(),(0,r.iD)("td",P,"NT$ "+(0,o.zw)(e.$filters.currency(parseInt(J.order.total)+120)),1)):((0,r.wg)(),(0,r.iD)("td",A,"NT$ "+(0,o.zw)(e.$filters.currency(J.order.total)),1))])])])]),(0,r._)("div",B,[(0,r._)("button",{type:"button",class:"button",onClick:t[2]||(t[2]=(0,s.iM)(((...e)=>Q.payOrder&&Q.payOrder(...e)),["prevent"]))},"確認付款")])]))])])])])],64)}var J=l(2578),Q=l(9498),R=l(4677),V={data(){return{order:{user:{}},isLoading:!1,orderId:""}},inject:["emitter"],computed:{calcTotal(){if(!this.order?.products)return 0;const e=Object.values(this.order?.products);return e.reduce(((e,t)=>e+t.total),0)}},methods:{...(0,J.nv)(Q.Z,["loadFavoritesFromLocalStorage"]),...(0,J.nv)(R.Z,["getCart"]),getOrder(){const e=`https://vue3-course-api.hexschool.io/api/cc45001127-api/order/${this.orderId}`;this.isLoading=!0,this.$http.get(e).then((e=>{e.data.success&&(this.order=e.data.order,this.isLoading=!1)}))},payOrder(){const e=`https://vue3-course-api.hexschool.io/api/cc45001127-api/pay/${this.orderId}`;this.$http.post(e).then((e=>{e.data.success&&this.getOrder()})),this.scrollToTop()},copyText(){const e=this.order.id,t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),this.emitter.emit("push-message",{style:"success",title:"已複製訂單編號"})},scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}},created(){this.orderId=this.$route.params.orderId,this.getOrder(),this.loadFavoritesFromLocalStorage(),this.getCart()}},X=l(89);const ee=(0,X.Z)(V,[["render",G]]);var te=ee}}]);
//# sourceMappingURL=916.d196cf82.js.map