"use strict";(self["webpackChunkproject"]=self["webpackChunkproject"]||[]).push([[6],{2006:function(e,l,a){a.r(l),a.d(l,{default:function(){return we}});var t=a(3396),s=a(7139),o=a(9242);const i=(0,t.uE)('<div class="l-banner bg-user-form"><div class="mask"></div><h2>資料填寫</h2></div><div class="order-progress mt-5"><ul><li><i class="fa-solid fa-list-check"></i>確認訂單</li><li class="active"><i class="fa-regular fa-pen-to-square"></i>資料填寫</li><li><i class="fa-solid fa-money-check-dollar"></i>付款完成</li></ul></div>',2),r={class:"container cart-product"},c={class:"row mt-5 mb-5"},n={class:"col-12 col-md-6 cart-list"},d={key:0,class:"cart-frame"},u=(0,t._)("h3",null,"訂單內容",-1),m={class:"overflow-auto mt-5 mb-2",style:{"max-height":"500px"}},p={class:"product-image-container"},f=["src"],h={class:"d-flex flex-column w-100 info"},_={class:"h-100 d-flex flex-column",style:{"justify-content":"space-evenly",padding:".5em"}},v={class:"d-flex flex-row"},y={class:"text-start price"},w={class:"d-flex"},g={class:"d-flex",style:{display:"flex","align-items":"end"}},b={class:"total mt-3"},k={class:"d-flex w-100 justify-content-between"},x=(0,t._)("h3",null,"小計",-1),C={key:0,class:"d-flex w-100 justify-content-between"},$=(0,t._)("h6",null,"已優惠",-1),V={class:"input-group mb-3 input-group-sm"},D={class:"input-group-append"},T={key:1,class:"d-flex w-100 justify-content-between"},W=(0,t._)("h6",null,"運費",-1),j=(0,t._)("h6",null,"+$120",-1),z=[W,j],q={key:2,class:"d-flex w-100 justify-content-between"},M=(0,t._)("h6",null,"運費",-1),U=(0,t._)("h4",null,"恭喜達成免運！",-1),N=[M,U],I={key:3,class:"d-flex w-100 justify-content-between"},L=(0,t._)("h5",null,"總計",-1),A={key:0},E={key:1},P={key:4,class:"d-flex w-100 justify-content-between"},S=(0,t._)("h5",null,"總計",-1),F={key:0},H={key:1},O={class:"col-12 col-md-6 shop-notice"},Y={class:"shop-notice-frame"},Z=(0,t._)("div",{style:{"text-align":"center","margin-bottom":"2em"}},[(0,t._)("h3",null,"訂購人資訊")],-1),K={class:"row justify-content-center"},B={class:"mb-3"},G=(0,t._)("label",{for:"email",class:"form-label"},"Email",-1),J={class:"mb-3"},Q=(0,t._)("label",{for:"name",class:"form-label"},"收件人姓名",-1),R={class:"mb-3"},X=(0,t._)("label",{for:"tel",class:"form-label"},"收件人電話",-1),ee={class:"mb-3"},le=(0,t._)("label",{for:"paymentMethod",class:"form-label"},"付款方式",-1),ae=(0,t._)("option",{value:"",disabled:"",selected:""},"請選擇付款方式",-1),te=(0,t._)("option",{value:"貨到付款"},"貨到付款",-1),se=(0,t._)("option",{value:"ATM銀行轉帳"},"ATM銀行轉帳",-1),oe=(0,t._)("option",{value:"信用卡"},"信用卡",-1),ie=(0,t._)("option",{value:"Apple Pay"},"Apple Pay",-1),re={class:"mb-3"},ce=(0,t._)("label",{for:"address",class:"form-label"},"收件人地址",-1),ne={class:"mb-3"},de=(0,t._)("label",{for:"message",class:"form-label"},"留言",-1),ue=(0,t._)("div",{class:"text-end"},[(0,t._)("button",{class:"next"},"送出訂單")],-1),me={class:"col-12 mt-3 route"},pe=(0,t._)("button",{type:"button",class:"previous"},"返回購物車",-1);function fe(e,l,a,W,j,M){const U=(0,t.up)("LoadingComponent"),fe=(0,t.up)("Field"),he=(0,t.up)("ErrorMessage"),_e=(0,t.up)("Form"),ve=(0,t.up)("router-link");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(U,{active:j.isLoading},null,8,["active"]),i,(0,t._)("div",r,[(0,t._)("div",c,[(0,t._)("div",n,[j.cart.carts?((0,t.wg)(),(0,t.iD)("div",d,[u,(0,t._)("div",m,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(j.cart.carts,(l=>((0,t.wg)(),(0,t.iD)("div",{class:"cart-item d-flex justify-content-center",key:l.id},[(0,t._)("div",p,[(0,t._)("img",{src:l.product.imageUrl,alt:"產品圖片"},null,8,f)]),(0,t._)("div",h,[(0,t._)("div",_,[(0,t._)("div",v,[(0,t._)("h5",null,(0,s.zw)(l.product.title),1)]),(0,t._)("h6",y,"單價：NT$ "+(0,s.zw)(l.product.price),1),(0,t._)("div",w,[(0,t._)("div",null," 數量："+(0,s.zw)(l.qty),1),(0,t._)("div",g,[(0,t._)("div",null,"NT$ "+(0,s.zw)(e.$filters.currency(l.product.price*l.qty)),1)])])])])])))),128))]),(0,t._)("div",b,[(0,t._)("div",k,[x,(0,t._)("h3",null,"NT$ "+(0,s.zw)(e.$filters.currency(j.cart.total)),1)]),M.hasCoupons?((0,t.wg)(),(0,t.iD)("div",C,[$,(0,t._)("h6",null,"-$ "+(0,s.zw)(e.$filters.currency(parseInt(j.cart.total)-parseInt(j.cart.final_total))),1)])):(0,t.kq)("",!0),(0,t._)("div",V,[(0,t.wy)((0,t._)("input",{type:"text",class:"form-control","onUpdate:modelValue":l[0]||(l[0]=e=>j.coupon_code=e),placeholder:"請輸入優惠碼"},null,512),[[o.nr,j.coupon_code]]),(0,t._)("div",D,[(0,t._)("button",{type:"button",onClick:l[1]||(l[1]=(...e)=>M.addCouponCode&&M.addCouponCode(...e))}," 套用優惠碼 ")])]),j.cart.total<3e3?((0,t.wg)(),(0,t.iD)("div",T,z)):((0,t.wg)(),(0,t.iD)("div",q,N)),M.hasCoupons?((0,t.wg)(),(0,t.iD)("div",P,[S,j.cart.total<3e3?((0,t.wg)(),(0,t.iD)("h5",F,"NT$ "+(0,s.zw)(e.$filters.currency(parseInt(j.cart.final_total)+120)),1)):((0,t.wg)(),(0,t.iD)("h5",H,"NT$ "+(0,s.zw)(e.$filters.currency(j.cart.final_total)),1))])):((0,t.wg)(),(0,t.iD)("div",I,[L,j.cart.total<3e3?((0,t.wg)(),(0,t.iD)("h5",A,"NT$ "+(0,s.zw)(e.$filters.currency(parseInt(j.cart.total)+120)),1)):((0,t.wg)(),(0,t.iD)("h5",E,"NT$ "+(0,s.zw)(e.$filters.currency(parseInt(j.cart.total))),1))]))])])):(0,t.kq)("",!0)]),(0,t._)("div",O,[(0,t._)("div",Y,[Z,(0,t._)("div",null,[(0,t._)("div",K,[(0,t.Wm)(_e,{ref:"myForm",onSubmit:M.createOrder},{default:(0,t.w5)((({errors:e})=>[(0,t._)("div",B,[G,(0,t.Wm)(fe,{id:"email",name:"email",type:"email",class:(0,s.C_)(["form-control",{"is-invalid":e["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:j.form.user.email,"onUpdate:modelValue":l[2]||(l[2]=e=>j.form.user.email=e)},null,8,["class","modelValue"]),(0,t.Wm)(he,{name:"email",class:"invalid-feedback"})]),(0,t._)("div",J,[Q,(0,t.Wm)(fe,{id:"name",name:"姓名",type:"text",class:(0,s.C_)(["form-control",{"is-invalid":e["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:j.form.user.name,"onUpdate:modelValue":l[3]||(l[3]=e=>j.form.user.name=e)},null,8,["class","modelValue"]),(0,t.Wm)(he,{name:"姓名",class:"invalid-feedback"})]),(0,t._)("div",R,[X,(0,t.Wm)(fe,{id:"tel",name:"電話",type:"tel",class:(0,s.C_)(["form-control",{"is-invalid":e["電話"]}]),placeholder:"請輸入電話",rules:M.isPhone,modelValue:j.form.user.tel,"onUpdate:modelValue":l[4]||(l[4]=e=>j.form.user.tel=e)},null,8,["class","rules","modelValue"]),(0,t.Wm)(he,{name:"電話",class:"invalid-feedback"})]),(0,t._)("div",ee,[le,(0,t.Wm)(fe,{id:"paymentMethod",name:"付款方式",as:"select",class:(0,s.C_)(["form-control",{"is-invalid":e["付款方式"]}]),rules:"required",modelValue:j.form.user.pay,"onUpdate:modelValue":l[5]||(l[5]=e=>j.form.user.pay=e)},{default:(0,t.w5)((()=>[ae,te,se,oe,ie])),_:2},1032,["class","modelValue"]),(0,t.Wm)(he,{name:"付款方式",class:"invalid-feedback"})]),(0,t._)("div",re,[ce,(0,t.Wm)(fe,{id:"address",name:"地址",type:"text",class:(0,s.C_)(["form-control",{"is-invalid":e["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:j.form.user.address,"onUpdate:modelValue":l[6]||(l[6]=e=>j.form.user.address=e)},null,8,["class","modelValue"]),(0,t.Wm)(he,{name:"地址",class:"invalid-feedback"})]),(0,t._)("div",ne,[de,(0,t.wy)((0,t._)("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"6","onUpdate:modelValue":l[7]||(l[7]=e=>j.form.message=e)},null,512),[[o.nr,j.form.message]])]),ue])),_:1},8,["onSubmit"])])])])]),(0,t._)("div",me,[(0,t.Wm)(ve,{class:"nav-link",to:"/user/cart",onClick:(0,o.iM)(e.scrollToTop,["prevent"])},{default:(0,t.w5)((()=>[pe])),_:1},8,["onClick"])])])])],64)}a(560);var he=a(2436),_e={data(){return{form:{user:{name:"",email:"",tel:"",pay:"",address:""},message:""},coupon_code:"",cart:{},isLoading:!1,couponTitle:""}},inject:["emitter"],mixins:[he.Z],computed:{hasCoupons(){return this.cart.carts.every((e=>e&&void 0!==e.coupon))}},methods:{isPhone(e){const l=/^(09)[0-9]{8}$/;return!!l.test(e)||"需要正確的電話號碼"},getCart(){const e="https://vue3-course-api.hexschool.io/api/cc45001127-api/cart";this.isLoading=!0,this.$http.get(e).then((e=>{this.cart=e.data.data,this.isLoading=!1}))},addCouponCode(){const e="https://vue3-course-api.hexschool.io/api/cc45001127-api/coupon",l={code:this.coupon_code};this.$http.post(e,{data:l}).then((e=>{this.$httpMessageState(e,"套用優惠券"),this.getCart(),e.data.success&&(this.couponTitle=this.cart.carts[0].coupon?.title),this.coupon_code=""}))},createOrder(){const e="https://vue3-course-api.hexschool.io/api/cc45001127-api/order";this.isLoading=!0;const l=this.form;this.$http.post(e,{data:l}).then((e=>{this.$httpMessageState(e,"訂單送出"),this.getCart(),this.$router.push(`/user/checkout/${e.data.orderId}`)}))}},created(){this.getCart()}},ve=a(89);const ye=(0,ve.Z)(_e,[["render",fe]]);var we=ye}}]);
//# sourceMappingURL=6.25384b3b.js.map