"use strict";(self["webpackChunkproject"]=self["webpackChunkproject"]||[]).push([[631],{5631:function(e,l,a){a.r(l),a.d(l,{default:function(){return ye}});var t=a(3396),s=a(7139),o=a(9242);const i=(0,t.uE)('<div class="banner bg-user-form"><div class="mask"></div><h2>資料填寫</h2></div><div class="order-progress mt-5"><ul><li><i class="fa-solid fa-list-check"></i>確認訂單</li><li class="active"><i class="fa-regular fa-pen-to-square"></i>資料填寫</li><li><i class="fa-solid fa-money-check-dollar"></i>付款完成</li></ul></div>',2),r={class:"container cart-product"},c={class:"row mt-5 mb-5"},n={class:"col-12 col-md-6 list"},d={key:0,class:"frame"},u=(0,t._)("h3",null,"訂單內容",-1),m={class:"overflow-auto mt-5 mb-2",style:{"max-height":"500px"}},p={class:"product-image-container"},f=["src"],h={class:"d-flex flex-column w-100 info"},_={class:"h-100 d-flex flex-column",style:{"justify-content":"space-evenly",padding:".5em"}},v={class:"d-flex flex-row"},y={class:"text-start price"},g={class:"d-flex"},w={class:"d-flex",style:{display:"flex","align-items":"end"}},b={class:"total mt-3"},k={class:"d-flex w-100 justify-content-between"},x=(0,t._)("h3",null,"小計",-1),C={key:0,class:"d-flex w-100 justify-content-between"},$={class:"input-group mb-3 input-group-sm"},V={class:"input-group-append"},D={key:1,class:"d-flex w-100 justify-content-between"},W=(0,t._)("h6",null,"運費",-1),j=(0,t._)("h6",null,"+$120",-1),z=[W,j],T={key:2,class:"d-flex w-100 justify-content-between"},q=(0,t._)("h6",null,"運費",-1),U=(0,t._)("h4",null,"恭喜達成免運！",-1),M=[q,U],N={key:3,class:"d-flex w-100 justify-content-between"},I=(0,t._)("h5",null,"總計",-1),L={key:0},A={key:1},E={key:4,class:"d-flex w-100 justify-content-between"},P=(0,t._)("h5",null,"總計",-1),S={key:0},F={key:1},H={class:"col-12 col-md-6 shop-notice"},O={class:"frame"},Y=(0,t._)("div",{style:{"text-align":"center","margin-bottom":"2em"}},[(0,t._)("h3",null,"訂購人資訊")],-1),Z={class:"row justify-content-center"},K={class:"mb-3"},B=(0,t._)("label",{for:"email",class:"form-label"},"Email",-1),G={class:"mb-3"},J=(0,t._)("label",{for:"name",class:"form-label"},"收件人姓名",-1),Q={class:"mb-3"},R=(0,t._)("label",{for:"tel",class:"form-label"},"收件人電話",-1),X={class:"mb-3"},ee=(0,t._)("label",{for:"paymentMethod",class:"form-label"},"付款方式",-1),le=(0,t._)("option",{value:"",disabled:"",selected:""},"請選擇付款方式",-1),ae=(0,t._)("option",{value:"貨到付款"},"貨到付款",-1),te=(0,t._)("option",{value:"ATM銀行轉帳"},"ATM銀行轉帳",-1),se=(0,t._)("option",{value:"信用卡"},"信用卡",-1),oe=(0,t._)("option",{value:"Apple Pay"},"Apple Pay",-1),ie={class:"mb-3"},re=(0,t._)("label",{for:"address",class:"form-label"},"收件人地址",-1),ce={class:"mb-3"},ne=(0,t._)("label",{for:"message",class:"form-label"},"留言",-1),de=(0,t._)("div",{class:"text-end"},[(0,t._)("button",{class:"next"},"送出訂單")],-1),ue={class:"col-12 mt-3 route"},me=(0,t._)("button",{type:"button",class:"previous"},"返回購物車",-1);function pe(e,l,a,W,j,q){const U=(0,t.up)("LoadingComponent"),pe=(0,t.up)("Field"),fe=(0,t.up)("ErrorMessage"),he=(0,t.up)("Form"),_e=(0,t.up)("router-link");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(U,{active:j.isLoading},null,8,["active"]),i,(0,t._)("div",r,[(0,t._)("div",c,[(0,t._)("div",n,[j.cart.carts?((0,t.wg)(),(0,t.iD)("div",d,[u,(0,t._)("div",m,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(j.cart.carts,(l=>((0,t.wg)(),(0,t.iD)("div",{class:"item d-flex justify-content-center",key:l.id},[(0,t._)("div",p,[(0,t._)("img",{src:l.product.imageUrl,alt:"產品圖片"},null,8,f)]),(0,t._)("div",h,[(0,t._)("div",_,[(0,t._)("div",v,[(0,t._)("h5",null,(0,s.zw)(l.product.title),1)]),(0,t._)("h6",y,"單價：NT$ "+(0,s.zw)(l.product.price),1),(0,t._)("div",g,[(0,t._)("div",null," 數量："+(0,s.zw)(l.qty),1),(0,t._)("div",w,[(0,t._)("div",null,"NT$ "+(0,s.zw)(e.$filters.currency(l.product.price*l.qty)),1)])])])])])))),128))]),(0,t._)("div",b,[(0,t._)("div",k,[x,(0,t._)("h3",null,"NT$ "+(0,s.zw)(e.$filters.currency(j.cart.total)),1)]),q.hasCoupons?((0,t.wg)(),(0,t.iD)("div",C,[(0,t._)("h6",null,[(0,t.Uk)("已優惠 "),(0,t._)("span",null,(0,s.zw)(j.cart.carts[0].coupon.title),1)]),(0,t._)("h6",null,"-$ "+(0,s.zw)(e.$filters.currency(parseInt(j.cart.total)-parseInt(j.cart.final_total))),1)])):(0,t.kq)("",!0),(0,t._)("div",$,[(0,t.wy)((0,t._)("input",{type:"text",class:"form-control","onUpdate:modelValue":l[0]||(l[0]=e=>j.coupon_code=e),placeholder:"請輸入優惠碼"},null,512),[[o.nr,j.coupon_code]]),(0,t._)("div",V,[(0,t._)("button",{type:"button",onClick:l[1]||(l[1]=(...e)=>q.addCouponCode&&q.addCouponCode(...e))}," 套用優惠碼 ")])]),j.cart.total<3e3?((0,t.wg)(),(0,t.iD)("div",D,z)):((0,t.wg)(),(0,t.iD)("div",T,M)),q.hasCoupons?((0,t.wg)(),(0,t.iD)("div",E,[P,j.cart.total<3e3?((0,t.wg)(),(0,t.iD)("h5",S,"NT$ "+(0,s.zw)(e.$filters.currency(parseInt(j.cart.final_total)+120)),1)):((0,t.wg)(),(0,t.iD)("h5",F,"NT$ "+(0,s.zw)(e.$filters.currency(j.cart.final_total)),1))])):((0,t.wg)(),(0,t.iD)("div",N,[I,j.cart.total<3e3?((0,t.wg)(),(0,t.iD)("h5",L,"NT$ "+(0,s.zw)(e.$filters.currency(parseInt(j.cart.total)+120)),1)):((0,t.wg)(),(0,t.iD)("h5",A,"NT$ "+(0,s.zw)(e.$filters.currency(parseInt(j.cart.total))),1))]))])])):(0,t.kq)("",!0)]),(0,t._)("div",H,[(0,t._)("div",O,[Y,(0,t._)("div",null,[(0,t._)("div",Z,[(0,t.Wm)(he,{ref:"myForm",onSubmit:q.createOrder},{default:(0,t.w5)((({errors:e})=>[(0,t._)("div",K,[B,(0,t.Wm)(pe,{id:"email",name:"email",type:"email",class:(0,s.C_)(["form-control",{"is-invalid":e["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:j.form.user.email,"onUpdate:modelValue":l[2]||(l[2]=e=>j.form.user.email=e)},null,8,["class","modelValue"]),(0,t.Wm)(fe,{name:"email",class:"invalid-feedback"})]),(0,t._)("div",G,[J,(0,t.Wm)(pe,{id:"name",name:"姓名",type:"text",class:(0,s.C_)(["form-control",{"is-invalid":e["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:j.form.user.name,"onUpdate:modelValue":l[3]||(l[3]=e=>j.form.user.name=e)},null,8,["class","modelValue"]),(0,t.Wm)(fe,{name:"姓名",class:"invalid-feedback"})]),(0,t._)("div",Q,[R,(0,t.Wm)(pe,{id:"tel",name:"電話",type:"tel",class:(0,s.C_)(["form-control",{"is-invalid":e["電話"]}]),placeholder:"請輸入電話",rules:q.isPhone,modelValue:j.form.user.tel,"onUpdate:modelValue":l[4]||(l[4]=e=>j.form.user.tel=e)},null,8,["class","rules","modelValue"]),(0,t.Wm)(fe,{name:"電話",class:"invalid-feedback"})]),(0,t._)("div",X,[ee,(0,t.Wm)(pe,{id:"paymentMethod",name:"付款方式",as:"select",class:(0,s.C_)(["form-control",{"is-invalid":e["付款方式"]}]),rules:"required",modelValue:j.form.user.pay,"onUpdate:modelValue":l[5]||(l[5]=e=>j.form.user.pay=e)},{default:(0,t.w5)((()=>[le,ae,te,se,oe])),_:2},1032,["class","modelValue"]),(0,t.Wm)(fe,{name:"付款方式",class:"invalid-feedback"})]),(0,t._)("div",ie,[re,(0,t.Wm)(pe,{id:"address",name:"地址",type:"text",class:(0,s.C_)(["form-control",{"is-invalid":e["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:j.form.user.address,"onUpdate:modelValue":l[6]||(l[6]=e=>j.form.user.address=e)},null,8,["class","modelValue"]),(0,t.Wm)(fe,{name:"地址",class:"invalid-feedback"})]),(0,t._)("div",ce,[ne,(0,t.wy)((0,t._)("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"6","onUpdate:modelValue":l[7]||(l[7]=e=>j.form.message=e)},null,512),[[o.nr,j.form.message]])]),de])),_:1},8,["onSubmit"])])])])]),(0,t._)("div",ue,[(0,t.Wm)(_e,{class:"nav-link",to:"/user/cart",onClick:(0,o.iM)(e.scrollToTop,["prevent"])},{default:(0,t.w5)((()=>[me])),_:1},8,["onClick"])])])])],64)}a(560);var fe=a(2436),he={data(){return{form:{user:{name:"",email:"",tel:"",pay:"",address:""},message:""},coupon_code:"",cart:{},isLoading:!1,total:""}},inject:["emitter"],mixins:[fe.Z],computed:{hasCoupons(){return this.cart.carts.every((e=>e.coupon))}},methods:{isPhone(e){const l=/^(09)[0-9]{8}$/;return!!l.test(e)||"需要正確的電話號碼"},getCart(){const e="https://vue3-course-api.hexschool.io/api/cc45001127-api/cart";this.isLoading=!0,this.$http.get(e).then((e=>{this.cart=e.data.data,this.total=e.data.data.total,this.isLoading=!1,console.log("購物車產品",this.cart)}))},addCouponCode(){const e="https://vue3-course-api.hexschool.io/api/cc45001127-api/coupon",l={code:this.coupon_code};this.$http.post(e,{data:l}).then((e=>{console.log(e),this.$httpMessageState(e,"套用優惠券"),this.getCart(),this.coupon_code=""}))},createOrder(){const e="https://vue3-course-api.hexschool.io/api/cc45001127-api/order";this.isLoading=!0;const l=this.form;this.$http.post(e,{data:l}).then((e=>{console.log("送出訂單資料",e),this.$httpMessageState(e,"訂單送出"),this.getCart(),this.$router.push(`/user/checkout/${e.data.orderId}`)}))}},created(){this.getCart()}},_e=a(89);const ve=(0,_e.Z)(he,[["render",pe]]);var ye=ve}}]);
//# sourceMappingURL=631.66ca52a5.js.map