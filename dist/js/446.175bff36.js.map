{"version":3,"file":"js/446.175bff36.js","mappings":"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","sources":["webpack://project/./src/views/front/UserCheckOut.vue","webpack://project/./src/views/front/UserCheckOut.vue?ed16"],"sourcesContent":["<template>\r\n  <LoadingComponent :active=\"isLoading\"></LoadingComponent>\r\n\r\n  <div class=\"l-banner bg-user-checkout\">\r\n    <div class=\"mask\"></div>\r\n    <h2>付款確認</h2>\r\n  </div>\r\n\r\n  <div class=\"order-progress mt-5\">\r\n    <ul>\r\n      <li><i class=\"fa-solid fa-list-check\"></i>確認訂單</li>\r\n      <li><i class=\"fa-regular fa-pen-to-square\"></i>資料填寫</li>\r\n      <li class=\"active\"><i class=\"fa-solid fa-money-check-dollar\"></i>付款完成</li>\r\n    </ul>\r\n  </div>\r\n\r\n  <div class=\"container\">\r\n    <div class=\"my-5 row justify-content-center\">\r\n      <div class=\"col-12 col-md-8 col-xl-7 check-out\">\r\n        <div class=\"card-header\">\r\n          <h2 class=\"text-center py-3\">訂單資訊</h2>\r\n        </div>\r\n        <div class=\"check-out-frame\">\r\n          <div v-if=\"order.is_paid === true\" class=\"d-flex flex-column text-center pay-success\">\r\n            <i class=\"fa-solid fa-check mb-2\"></i>\r\n            <h5>付款成功</h5>\r\n            <div class=\"mt-2 mb-2\">訂單編號：{{ order.id }}  <i @click=\"copyText\" class=\"fa-regular fa-copy\"></i></div>\r\n            <router-link to=\"/user/shopping\" @click.prevent=\"scrollToTop\">\r\n              <button type=\"button\" class=\"button w-50\">繼續購物</button>\r\n            </router-link>\r\n          </div>\r\n          <div v-else>\r\n            <div class=\"text-end create\">\r\n              <h5>訂單成立時間：{{ $filters.date(order.create_at) }}</h5>\r\n            </div>\r\n            <div class=\"accordion\" id=\"accordionExample\">\r\n              <div class=\"accordion-item\">\r\n                <h2 class=\"accordion-header\" id=\"headingOne\">\r\n                  <button class=\"accordion-button\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#collapseOne\" aria-expanded=\"true\" aria-controls=\"collapseOne\">\r\n                    商品資訊\r\n                  </button>\r\n                </h2>\r\n                <div id=\"collapseOne\"  v-for=\"item in order.products\" :key=\"item.id\"\r\n                  class=\"accordion-collapse collapse show\" aria-labelledby=\"headingOne\" data-bs-parent=\"#accordionExample\">\r\n                  <div class=\"accordion-body\">\r\n                    <div class=\"d-flex align-items-center check-out-product\">\r\n                      <div>\r\n                        <img :src=\"item.product.imageUrl\" alt=\"產品圖片\" style=\"width: 100px; height: 100px;\">\r\n                      </div>\r\n                      <div class=\"d-flex flex-column mx-1\">\r\n                        <h5>{{ item.product.title }}</h5>\r\n                        <p>數量：{{ item.qty }}</p>\r\n                      </div>\r\n                      <div class=\"ms-auto\">\r\n                        <h6 v-if=\"item.final_total\">NT$ {{ $filters.currency(item.final_total) }}</h6>\r\n                        <h6 v-else>>NT$ {{ $filters.currency(item.product.price) }}</h6>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"card-body\">\r\n              <table>\r\n                <tbody>\r\n                  <tr>\r\n                    <td>訂單編號</td>\r\n                    <td>{{ order.id }} <i @click=\"copyText\" class=\"fa-regular fa-copy\"></i></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>付款方式</td>\r\n                    <td>{{ order.user.pay }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>姓名</td>\r\n                    <td>{{ order.user.name }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>手機</td>\r\n                    <td>{{ order.user.tel }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>E-mail</td>\r\n                    <td>{{ order.user.email }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>收件地址</td>\r\n                    <td>{{ order.user.address }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>備註</td>\r\n                    <td v-if=\"!order.message\">無</td>\r\n                    <td v-else>{{ order.message }}</td>\r\n                  </tr>\r\n                  <tr v-if=\"calcTotal < 3000\">\r\n                    <td>小計</td>\r\n                    <td>NT$ {{ $filters.currency(order.total) }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>運費</td>\r\n                    <td v-if=\"calcTotal < 3000\">+ $120</td>\r\n                    <td v-else>恭喜達成免運！</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>金額總計</td>\r\n                    <td v-if=\"calcTotal < 3000\">NT$ {{ $filters.currency(parseInt(order.total)+120) }}</td>\r\n                    <td v-else>NT$ {{ $filters.currency(order.total) }}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            <div class=\"text-center\">\r\n              <button type=\"button\" class=\"button\" @click.prevent=\"payOrder\">確認付款</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      order: {\r\n        // 因畫面渲染的 user沒有用 v-for或是迴圈等方式就要預先定義 user: {}，告訴瀏覽器 user 這是一個物件，\r\n        // 我要用物件取值的方式渲染出來，否則瀏覽器無法解析\r\n        user: {}\r\n      },\r\n      isLoading: false,\r\n      orderId: ''\r\n    }\r\n  },\r\n  inject: ['emitter'],\r\n  computed: {\r\n    // 每筆訂單原始金額加總\r\n    calcTotal () {\r\n      if (!this.order?.products) {\r\n        return 0\r\n      }\r\n      const orderArray = Object.values(this.order?.products)\r\n      // 使用 reduce 將每個訂單的 total 屬性加總\r\n      return orderArray.reduce((accumulator, order) => {\r\n        return accumulator + order.total\r\n      }, 0)\r\n    }\r\n  },\r\n  methods: {\r\n    getOrder () {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order/${this.orderId}`\r\n      this.isLoading = true\r\n      this.$http.get(url)\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            this.order = res.data.order\r\n            this.isLoading = false\r\n          }\r\n        })\r\n    },\r\n    payOrder () {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/pay/${this.orderId}`\r\n      this.$http.post(url)\r\n        .then((res) => {\r\n          console.log('付款成功', res)\r\n          if (res.data.success) {\r\n            // 成功後會將order.is_paid改為true\r\n            // 付款完成重新取得資料渲染頁面\r\n            this.getOrder()\r\n          }\r\n        })\r\n      this.scrollToTop()\r\n    },\r\n    // 複製訂單號碼\r\n    copyText () {\r\n      const textToCopy = this.order.id\r\n      const textarea = document.createElement('textarea')\r\n      textarea.value = textToCopy\r\n      document.body.appendChild(textarea)\r\n      textarea.select()\r\n      document.execCommand('copy')\r\n      document.body.removeChild(textarea)\r\n      this.emitter.emit('push-message', {\r\n        style: 'success',\r\n        title: '已複製訂單編號'\r\n      })\r\n    },\r\n    scrollToTop () {\r\n      window.scrollTo({\r\n        top: 0,\r\n        behavior: 'smooth'\r\n      })\r\n    }\r\n  },\r\n  created () {\r\n    // 將路由上的id並取出帶入api\r\n    this.orderId = this.$route.params.orderId\r\n    this.getOrder()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./UserCheckOut.vue?vue&type=template&id=7c33ccd4\"\nimport script from \"./UserCheckOut.vue?vue&type=script&lang=js\"\nexport * from \"./UserCheckOut.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createStaticVNode","class","_createElementVNode","key","type","id","_createElementBlock","_Fragment","_createVNode","_component_LoadingComponent","active","$data","isLoading","_hoisted_1","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","order","is_paid","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_createTextVNode","_toDisplayString","onClick","_cache","args","$options","copyText","_component_router_link","to","_withModifiers","scrollToTop","default","_withCtx","_hoisted_12","_","_hoisted_13","_hoisted_14","_ctx","$filters","date","create_at","_hoisted_15","_hoisted_16","_hoisted_17","_renderList","products","item","_hoisted_18","_hoisted_19","src","product","imageUrl","alt","style","_hoisted_20","_hoisted_21","title","qty","_hoisted_22","final_total","_hoisted_23","currency","_hoisted_24","price","_hoisted_25","_hoisted_26","_hoisted_27","user","pay","_hoisted_28","name","_hoisted_29","tel","_hoisted_30","email","_hoisted_31","address","_hoisted_32","message","_hoisted_34","_hoisted_33","calcTotal","_hoisted_35","_hoisted_36","total","_createCommentVNode","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","parseInt","_hoisted_42","_hoisted_43","payOrder","data","orderId","inject","computed","this","orderArray","Object","values","reduce","accumulator","methods","getOrder","url","$http","get","then","res","success","post","console","log","textToCopy","textarea","document","createElement","value","body","appendChild","select","execCommand","removeChild","emitter","emit","window","scrollTo","top","behavior","created","$route","params","__exports__","render"],"sourceRoot":""}